{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./api/profile/index.js","webpack:///./api/todos/getAllTodos.js","webpack:///./api/todos/index.js","webpack:///./api/todos/processTodos.js","webpack:///./db/index.js","webpack:///./handler.js","webpack:///./models/Profile.js","webpack:///./models/Todo.js","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"mongoose\"","webpack:///external \"source-map-support/register\""],"names":["renderServerError","response","errorMessage","statusCode","headers","body","success","error","getAllProfile","event","context","callback","callbackWaitsForEmptyEventLoop","then","Profile","find","data","catch","createProfile","create","JSON","parse","getAllTodos","queryStringParameters","userId","Todo","processTodos","processTodo","todo","promise","resolve","reject","query","_id","id","isDeleteOperation","deleted","err","console","log","findByIdAndRemove","findByIdAndUpdate","todos","all","map","ids","todoIds","filter","mongoose","Types","ObjectId","$in","e","stack","Promise","global","isConnected","dbConnection","connect","db","connections","readyState","require","ProfileSchema","Schema","firstName","String","lastName","password","country","subscribe","dateOfBirth","Date","married","model","TodoSchema","title","description","dueDate"],"mappings":"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","file":"handler.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./handler.js\");\n","import mongoose from 'mongoose';\nimport connectToDatabase from '../../db';\nimport Profile from '../../models/Profile';\n\nconst renderServerError = (response, errorMessage) => response(null, {\n\tstatusCode: 500,\n\theaders: { 'Content-Type': 'application/json' },\n\tbody: { success: false, error: errorMessage },\n});\n\nexport const getAllProfile = (event, context, callback) => {\n\tcontext.callbackWaitsForEmptyEventLoop = false;\n\tconnectToDatabase().then(() => {\n\t\tProfile.find({}, (error, data) => {\n\t\t\tcallback(null, { statusCode: 200, headers: { 'Content-Type' : 'application/json' }, body: JSON.stringify(data) })\n\t\t});\n\t})\n\t.catch(() => renderServerError(callback, 'Unable to fetch! Try again later'));\n}\n\nexport const createProfile = (event, context, callback) => {\n\tcontext.callbackWaitsForEmptyEventLoop = false;\n\tconnectToDatabase().then(() => {\n\t\tProfile.create(JSON.parse(event.body), (error, data) => {\n\t\t\tcallback(null, { statusCode: 200, headers: { 'Content-Type' : 'application/json' }, body: JSON.stringify(data) })\n\t\t});\n\t})\n\t.catch(() => renderServerError(callback, 'Unable to create! Try again later'));\n}","import mongoose from 'mongoose';\n\nimport connectToDatabase from '../../db';\nimport Todo from '../../models/Todo';\n\nconst renderServerError = (response, errorMessage) => response(null, {\n  statusCode: 500,\n  headers: { 'Content-Type': 'application/json' },\n  body: { success: false, error: errorMessage },\n});\n\nexport const getAllTodos = (event, context, callback) => {\n  context.callbackWaitsForEmptyEventLoop = false;\n\n  const { userId } = event.queryStringParameters || {};\n  connectToDatabase().then(() => {\n    Todo.find({ userId }, (error, data) => {\n      callback(null, { statusCode: 200, headers: { 'Content-Type' : 'application/json' }, body: JSON.stringify(data) })\n    });\n  })\n  .catch(() => renderServerError(callback, 'Unable to fetch todos! Try again later'));\n}\n","import { getAllTodos } from './getAllTodos';\nimport { processTodos } from './processTodos';\n\nexport {\n  getAllTodos,\n  processTodos,\n}","import mongoose from 'mongoose';\n\nimport connectToDatabase from '../../db';\nimport Todo from '../../models/Todo';\n\nconst processTodo = (todo) => {\n  const promise = new Promise((resolve, reject) => {\n    const query = { _id: todo.id };\n    const isDeleteOperation = todo.deleted;\n    const callback = (err, data) => {\n      console.log('Error', err);\n      console.log('data', data);\n      err ? reject(err) : resolve(isDeleteOperation ? null : data._id)\n    };\n\n    if ( todo.id ) {\n      isDeleteOperation ? Todo.findByIdAndRemove(query, callback) : Todo.findByIdAndUpdate(todo.id, todo, {}, callback);\n    } else {\n      Todo.create(todo, callback);\n    }\n  });\n  return promise;\n}\n\nconst renderServerError = (response, errorMessage) => response(null, {\n  statusCode: 500,\n  headers: { 'Content-Type': 'application/json' },\n  body: { success: false, error: errorMessage },\n});\n\nexport const processTodos = (event, context, callback) => {\n  context.callbackWaitsForEmptyEventLoop = false;\n  const { todos } = JSON.parse(event.body) || {};\n  connectToDatabase()\n    .then(() => {\n      Promise.all(todos.map(processTodo))\n        .then((ids) => {\n          const todoIds = ids.filter((id) => (!!id)).map((id) => new mongoose.Types.ObjectId(id));\n          Todo.find({ '_id' : { $in: todoIds } }, (error, data) => callback(null, { statusCode: 200, body: JSON.stringify(data) }));\n        })\n        .catch((e) => renderServerError(callback, 'Unable to process todos! Try again later' + e.stack));\n    })\n    .catch((e) => renderServerError(callback, 'Unable to process todos! Try again later' + e.stack));\n};","import mongoose from 'mongoose';\n\nmongoose.Promise = global.Promise;\nlet isConnected;\n\nconst dbConnection = () => {\n  console.log('isConnected at start ', isConnected);\n  if (isConnected) {\n    console.log('=> From Existing DB connection');\n    return Promise.resolve();\n  }\n\n  console.log('=> Using new DB connection');\n  return mongoose.connect(\"mongodb://prasanna1211:hellomid125@cluster0-shard-00-00-m5ypw.mongodb.net:27017,cluster0-shard-00-01-m5ypw.mongodb.net:27017,cluster0-shard-00-02-m5ypw.mongodb.net:27017/test?ssl=true&replicaSet=Cluster0-shard-0&authSource=admin\")\n    .then(db => { \n      console.log('Connected : ' + db.connections[0].readyState);\n      isConnected = db.connections[0].readyState;\n    });\n};\n\nexport default dbConnection;","import { getAllProfile, createProfile } from './api/profile';\nimport { getAllTodos, processTodos } from './api/todos';\n\nexport { \n\tgetAllProfile,\n\tcreateProfile,\n\tgetAllTodos,\n\tprocessTodos,\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","const mongoose = require('mongoose');\n\nconst ProfileSchema = new mongoose.Schema({\n\tfirstName: String,\n\tlastName: String,\n\tpassword: String,\n\tcountry: String,\n\tsubscribe: String,\n\tdateOfBirth: Date,\n\tmarried: String,\n});\n\nexport default mongoose.model('Profile', ProfileSchema);","const mongoose = require('mongoose');\n\nconst TodoSchema = new mongoose.Schema({  \n  title: String,\n  description: String,\n  dueDate: Date,\n  userId: String,\n});\n\nexport default mongoose.model('Todo', TodoSchema);","module.exports = require(\"babel-runtime/core-js/json/stringify\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"mongoose\");","module.exports = require(\"source-map-support/register\");"],"sourceRoot":""}